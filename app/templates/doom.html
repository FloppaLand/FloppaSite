{% macro doom_captcha() %}
  <link rel="stylesheet" href="{{ url_for('static', filename='doom/doom.css') }}">
  <div class="captcha-container" tabindex="1">
    <div class="captcha-header">
      <h2>ВЫ ДОЛЖНЫ ЗАСЛУЖИТЬ СВОЙ СКИН!</h2>
      <p>Убейте трёх монстров в DOOM®</p>
    </div>

    <div class="captcha-canvas-container">
      <div id="status">Загрузка...</div>
      <progress id="progress" value="0" max="100" hidden></progress>
      <canvas class="captcha-canvas" id="canvas" oncontextmenu="event.preventDefault()" tabindex="-1"></canvas>
      <div class="mobile-controls">
        <div class="d-pad">
          <button class="up">↑</button>
          <button class="left">←</button>
          <button class="right">→</button>
          <button class="down">↓</button>
        </div>
        <button class="fire-button"></button>
      </div>
    </div>

    <div class="captcha-footer">
      <div class="captcha-controls">
        <button class="captcha-button captcha-refresh-button" aria-label="Refresh challenge" id="refresh-button">
            <svg class="captcha-refresh-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 12v-2l-4 3 4 3v-2h2.997A6.006 6.006 0 0 0 16 8h-2a4 4 0 0 1-3.996 4H7zM9 2H6.003A6.006 6.006 0 0 0 0 8h2a4 4 0 0 1 3.996-4H9v2l4-3-4-3v2z" fill-rule="evenodd"></path>
            </svg>
        </button>
      </div>
      <div class="status-message focus">Нажмите чтобы играть</div>
      <div class="status-message death">Вы умерли! Повторите попытку</div>
      <div class="status-message instructions">Используйте WASD и Пробел</div>
      <button class="captcha-button captcha-verify-button" aria-label="Verify, 0 out of 3 monsters killed"
        id="verify-button">
        <svg class="captcha-verify-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M19 21C19 21.5523 18.5523 22 18 22H14H10H6C5.44771 22 5 21.5523 5 21V18.75C5 17.7835 4.2165 17 3.25 17C2.55964 17 2 16.4404 2 15.75V11C2 5.47715 6.47715 1 12 1C17.5228 1 22 5.47715 22 11V15.75C22 16.4404 21.4404 17 20.75 17C19.7835 17 19 17.7835 19 18.75V21ZM17 20V18.75C17 16.9358 18.2883 15.4225 20 15.075V11C20 6.58172 16.4183 3 12 3C7.58172 3 4 6.58172 4 11V15.075C5.71168 15.4225 7 16.9358 7 18.75V20H9V18C9 17.4477 9.44771 17 10 17C10.5523 17 11 17.4477 11 18V20H13V18C13 17.4477 13.4477 17 14 17C14.5523 17 15 17.4477 15 18V20H17ZM11 12.5C11 13.8807 8.63228 15 7.25248 15C5.98469 15 5.99206 14.055 6.00161 12.8306V12.8305C6.00245 12.7224 6.00331 12.6121 6.00331 12.5C6.00331 11.1193 7.12186 10 8.50166 10C9.88145 10 11 11.1193 11 12.5ZM17.9984 12.8306C17.9975 12.7224 17.9967 12.6121 17.9967 12.5C17.9967 11.1193 16.8781 10 15.4983 10C14.1185 10 13 11.1193 13 12.5C13 13.8807 15.3677 15 16.7475 15C18.0153 15 18.0079 14.055 17.9984 12.8306Z" fill="#888888"></path>
          </svg>
        <span>0/3</span>
      </button>
    </div>
  </div>

  <script>
    var DATA_PATH = "{{ url_for('static', filename='doom/doom.data') }}"
    var WASM_PATH = "doom.wasm"



    window.va =
      window.va ||
      function () {
        (window.vaq = window.vaq || []).push(arguments);
      };
  </script>
  <script src="{{ url_for('static', filename='doom/doom_manager.js') }}"></script>
  <script async type="text/javascript" src="{{ url_for('static', filename='doom/doom.js') }}"></script>


{% endmacro %}
